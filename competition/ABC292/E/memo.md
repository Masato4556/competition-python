TLEで解けなかった

ある点xから、初期状態のグラフで到達可能な別の点に対して全て辺を追加したものが、最終的なグラフの姿になることに気づければよかった。

そう考えれば、全ての頂点から到達可能な点のリストをdfsやbfsで求めれば良い